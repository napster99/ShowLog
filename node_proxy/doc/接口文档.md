## nodejs 区域化后台中间层 接口文档

====================================================================

###一、公共接口


```
name : 获取菜单列表
url  : http://192.168.1.42:3000/main/auth/info
args : sid cid
back : {"menu":{"运营相关":[{"name":"广告图配置","id":5,"pId":1,"icon":"fa-file-image-o","ui_sref":"app.advLogo"},{"name":"轮播图配置","id":36,"pId":1,"icon":"fa-photo","ui_sref":"app.carouselFigure","child":[{"name":"首页轮播图","id":58,"pId":36,"icon":"","ui_sref":"app.carouselFigure"},{"name":"充值轮播图","id":59,"pId":36,"icon":"","ui_sref":"app.carouselFigure2"},{"name":"兑换轮播图","id":60,"pId":36,"icon":"","ui_sref":"app.carouselFigure3"}]}]}}
```

```
name:发送验证码
url  : http://192.168.1.42:3000/main/auth/send_code?mobile=13958111541
args : mobile
back : {'code' : 0 , 'msg' : '已发送'}
```

```
name:登录接口
url  : http://192.168.1.42:3000/main/auth/login?mobile=13958111541&verify=1111
args : mobile   verify
back : {"areas":[{"cid":1,"cname":"杭州"},{"cid":2,"cname":"上海"}],"userInfo":{"uid":1,"nickname":"章晓健","status":"ACTIVE"},"sid":"STR:MONKEY:SESSION:2ob73y8e”}
```

```
name:登出接口
url  : http://192.168.1.42:3000/main/auth/logout?sid=STR:MONKEY:SESSION:fmm38512
args : sid
back : {'code' : 0 , 'msg' : '登出成功'}
```


###二、角色接口

```
name : 角色管理列表
url  : http://192.168.1.42:3000/main/role/list
args : cid page sid
back : {"list":[{"id":1,"name":"超级管理员","desc":"拥有所有权限"},{"id":2,"name":"普通用户","desc":"普通的权限"}],"total_page":1};
```

```
name : 获取权限树
url  : http://192.168.1.42:3000/main/role/priv_list
args : 有role_id对应修改，无role_id添加 sid
back : {"list":[{"id":1,"name":"超级管理员","desc":"拥有所有权限"},{"id":2,"name":"普通用户","desc":"普通的权限"}],"total_page":1};
```

```
name : 获取地区列表
url  : http://192.168.1.42:3000/main/role/region
args : sid
back : {"code":0,"data":[{"id":1,"cname":"杭州"},{"id":2,"cname":"上海"},{"id":4,"cname":"金华"}]}
```


```
name : 添加角色－区域管理员
url  : http://192.168.1.42:3000/main/role/add
args : name desc cid cname operations sid 有role_id对应修改，无role_id添加
back : {'code' : 0, 'msg' : '添加成功'} or {'code' : 0, 'msg' : '修改成功'}
```


```
name : 添加角色－超级管理员
url  : http://192.168.1.42:3000/main/role/add_multi
args : name desc cid cname operations sid 有role_id对应修改，无role_id添加
back : {'code' : 0, 'msg' : '添加成功'} or {'code' : 0, 'msg' : '修改成功'}
```


```
name : 获取角色信息
url  : http://192.168.1.42:3000/main/role/get
args : id sid
back : {"code":0,"data":{"id":1,"name":"超级管理员","desc":"拥有所有权限"}}
```

```
name : 删除角色
url  : http://192.168.1.42:3000/main/role/delete
args : id sid
back : {'code' : 0, 'msg' : '删除成功!'}
```


###三、用户接口

```
name : 用户管理列表
url  : http://192.168.1.42:3000/main/user/list
args : cid sid
back : {"code":0,"list":[{"id":2,"name":"张三","email":"111111@qq.com","phone":"13511112222","last_login":0,"status":"BANNED","err_times":0,"banned_time":0,"ctime":0,"role":"2"},{"id":345,"name":"刘得哈","email":null,"phone":"13399998887","last_login":0,"status":"ACTIVE","err_times":0,"banned_time":0,"ctime":null,"role":"2"}]}
```

```
name : 添加用户－区域管理员
url  : http://192.168.1.42:3000/main/user/add
args : name phone role sid 有user_id对应修改，无user_id添加
back : {'code' : 0, 'msg' : '添加成功'} or {'code' : 0, 'msg' : '修改成功'}
```

```
name : 获取用户信息
url  : http://192.168.1.42:3000/main/user/info
args : user_id sid
back : {"code":0,"user":{"name":"章晓健","phone":"13958111541","role":"1"}}
```


```
name : 获取角色列表信息
url  : http://192.168.1.42:3000/main/user/role_list
args : sid 有cid对应局部，无cid所有
back : {"code":0,"list":[{"id":1,"name":"超级管理员"},{"id":2,"name":"普通用户"},{"id":3,"name":"哈哈哈"},{"id":34924,"name":"普通管理"}]}
```

```
name : 删除用户
url  : http://192.168.1.42:3000/main/user/delete
args : user_id sid
back : {'code' : 0, 'msg' : '删除成功!'}
```


















